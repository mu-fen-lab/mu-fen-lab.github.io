<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜è´¨é‡å‘å±•æ—¶é—´è½´</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --text-color: #34495e;
        }

        body {
            margin: 0;
            font-family: "Microsoft YaHei", sans-serif;
            background: #f8f9fa;
            color: var(--text-color);
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            height: 100vh;
            overflow: hidden;
        }

        .timeline-section {
            padding: 20px;
            border-right: 2px solid #eee;
            overflow-y: hidden;
            position: relative;
        }

        .event-track {
            position: absolute;
            bottom: 0;
            width: calc(100% - 40px);
            transition: transform 1s linear;
        }

        .event-card {
            background: white;
            margin: 15px 0;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: 0.6s ease;
        }

        .event-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .chart-section {
            padding: 30px;
            position: relative;
            border-right: 2px solid #eee;
        }

        .achievement-section {
            padding: 20px;
            background: white;
            overflow-y: auto;
        }

        .achievement-card {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: 40vh 40vh auto;
            }
            .chart-section canvas {
                max-height: 300px;
            }
        }

        .fade-out {
            animation: fadeOut 2s forwards;
        }

        @keyframes fadeOut {
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="timeline-section">
            <div class="event-track" id="eventTrack"></div>
        </div>
        
        <div class="chart-section">
            <canvas id="mainChart"></canvas>
        </div>

        <div class="achievement-section" id="achievementPanel">
            <h3>2025å¹´å‘å±•æˆæœ</h3>
            <div class="achievement-card">ğŸŒ± å•ä½GDPèƒ½è€—ä¸‹é™18.5%</div>
            <div class="achievement-card">ğŸš€ å…¨çƒåˆ›æ–°æŒ‡æ•°æ’åç¬¬10</div>
            <div class="achievement-card">ğŸ­ æˆ˜ç•¥æ–°å…´äº§ä¸šå æ¯”17.3%</div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// ä¿®å¤åçš„æ•°æ®æº
const dataset = {
    years: [2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],
    GDP: [68.9,74.4,83.2,91.9,99.1,101.4,114.9,121.0,126.1,131.7,138.0],
    GIP: [45.2,48.6,52.3,57.1,61.8,65.4,68.9,72.5,76.3,80.1,84.5],
    events: [
        {year:2015, content:"ä¸­å›½åˆ¶é€ 2025å¯åŠ¨", source:"å›½åŠ¡é™¢æ–‡ä»¶"},
        {year:2017, content:"åä¹å¤§æå‡ºé«˜è´¨é‡å‘å±•", source:"åä¹å¤§æŠ¥å‘Š"},
        {year:2020, content:"åŒå¾ªç¯æ–°å‘å±•æ ¼å±€", source:"åå››äº”è§„åˆ’"},
        {year:2021, content:"ç¢³è¾¾å³°è¡ŒåŠ¨æ–¹æ¡ˆå®æ–½", source:"ç”Ÿæ€ç¯å¢ƒéƒ¨"},
        {year:2025, content:"ç°ä»£åŒ–äº§ä¸šä½“ç³»å»ºæˆ", source:"å‘æ”¹å§”è¯„ä¼°"}
    ]
};

// ä¿®å¤1ï¼šç¡®ä¿DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
    // ä¿®å¤2ï¼šæ­£ç¡®è·å–canvasä¸Šä¸‹æ–‡
    const ctx = document.getElementById('mainChart').getContext('2d');
    
    // ä¿®å¤3ï¼šå®Œæ•´é…ç½®å›¾è¡¨
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [],
            datasets: [{
                label: 'GDPæ€»é‡ (ä¸‡äº¿å…ƒ)',
                data: [],
                borderColor: '#2ecc71',
                tension: 0.3,
                borderWidth: 2
            },{
                label: 'ç»¿è‰²åˆ›æ–°æŒ‡æ•°',
                data: [],
                borderColor: '#3498db',
                tension: 0.3,
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
                duration: 0 // ç¦ç”¨å†…ç½®åŠ¨ç”»
            },
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    });

    // ä¿®å¤4ï¼šäº‹ä»¶å¡ç‰‡åˆå§‹åŒ–
    const eventTrack = document.getElementById('eventTrack');
    let eventElements = [];
    
    function initEvents() {
        dataset.events.forEach(event => {
            const card = document.createElement('div');
            card.className = 'event-card';
            card.innerHTML = `
                <div style="color:${getComputedStyle(document.documentElement)
                    .getPropertyValue('--primary-color')};font-weight:500;">
                    ${event.year}å¹´
                </div>
                <div style="color:#7f8c8d;margin-top:8px;">
                    ${event.content}
                </div>
                <div style="color:#95a5a6;font-size:0.8em;margin-top:12px;">
                    ${event.source}
                </div>
            `;
            eventTrack.appendChild(card);
            eventElements.push({
                element: card,
                year: event.year
            });
        });
    }

    // ä¿®å¤5ï¼šæ”¹è¿›åŠ¨ç”»ç³»ç»Ÿ
    let currentIndex = 0;
    const animationSpeed = 1500; // 1.5ç§’/æ­¥
    let isPlaying = true;

    function animateChart() {
        if(currentIndex >= dataset.years.length) {
            setTimeout(() => {
                document.querySelector('.chart-section').classList.add('fade-out');
                eventTrack.style.transform = 'translateY(-100%)';
                isPlaying = false;
            }, 2000);
            return;
        }

        // æ›´æ–°å›¾è¡¨æ•°æ®
        const currentYear = dataset.years[currentIndex];
        chart.data.labels.push(currentYear);
        chart.data.datasets[0].data.push(dataset.GDP[currentIndex]);
        chart.data.datasets[1].data.push(dataset.GIP[currentIndex]);
        chart.update();

        // æ›´æ–°äº‹ä»¶æ—¶é—´è½´
        const currentEvent = eventElements.find(e => e.year === currentYear);
        if(currentEvent) {
            currentEvent.element.classList.add('active');
            // è‡ªåŠ¨æ»šåŠ¨æ—¶é—´è½´
            const cardHeight = currentEvent.element.offsetHeight + 30;
            eventTrack.style.transform = `translateY(-${cardHeight * currentIndex}px)`;
        }

        currentIndex++;
        if(isPlaying) setTimeout(animateChart, animationSpeed);
    }

    // ä¿®å¤6ï¼šæ·»åŠ äº¤äº’æ§åˆ¶
    window.addEventListener('wheel', (e) => {
        if(!isPlaying) {
            eventTrack.style.transform = 'translateY(0)';
            document.querySelector('.chart-section').style.opacity = '1';
            document.querySelector('.chart-section').classList.remove('fade-out');
        }
    });

    // åˆå§‹åŒ–æ‰§è¡Œ
    initEvents();
    setTimeout(animateChart, 1000);
});
</script>
</body>
</html>
